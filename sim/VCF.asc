Version 4
SHEET 1 880 1712
WIRE -608 144 -608 112
WIRE -448 144 -448 112
WIRE -704 256 -704 224
WIRE -608 256 -608 224
WIRE -448 256 -448 224
WIRE -528 304 -544 304
WIRE -512 304 -528 304
WIRE -704 368 -704 336
WIRE -704 368 -832 368
WIRE -608 368 -608 352
WIRE -528 368 -528 304
WIRE -528 368 -608 368
WIRE -704 384 -704 368
WIRE -608 384 -608 368
WIRE -448 416 -448 352
WIRE -512 432 -544 432
WIRE -512 464 -512 432
WIRE -960 496 -960 448
WIRE -704 496 -704 480
WIRE -656 496 -704 496
WIRE -608 496 -608 480
WIRE -608 496 -656 496
WIRE -656 528 -656 496
WIRE -832 576 -832 368
WIRE -800 576 -832 576
WIRE -704 576 -736 576
WIRE -960 608 -960 576
WIRE -832 640 -832 576
WIRE -800 640 -832 640
WIRE -704 656 -704 576
WIRE -704 656 -736 656
WIRE -656 656 -656 608
WIRE -656 656 -704 656
WIRE -800 672 -832 672
WIRE -832 704 -832 672
WIRE 384 736 -144 736
WIRE -144 752 -144 736
WIRE -704 816 -864 816
WIRE -288 816 -624 816
WIRE 384 816 384 736
WIRE 384 816 272 816
WIRE -112 832 -144 832
WIRE -16 832 -16 800
WIRE 80 864 80 832
WIRE 240 864 112 864
WIRE 272 864 272 816
WIRE 304 864 272 864
WIRE -288 880 -288 816
WIRE -288 880 -400 880
WIRE 384 880 384 816
WIRE 384 880 368 880
WIRE 432 880 384 880
WIRE 576 880 496 880
WIRE 112 896 112 864
WIRE 240 896 240 864
WIRE 272 896 240 896
WIRE 304 896 272 896
WIRE -864 912 -864 816
WIRE -832 912 -864 912
WIRE -736 912 -736 880
WIRE -864 928 -864 912
WIRE 272 928 272 896
WIRE -640 944 -640 912
WIRE -448 944 -608 944
WIRE -400 944 -400 880
WIRE -368 944 -400 944
WIRE -288 960 -288 880
WIRE -288 960 -304 960
WIRE -256 960 -288 960
WIRE -144 960 -176 960
WIRE -112 960 -144 960
WIRE -608 976 -608 944
WIRE -448 976 -448 944
WIRE -400 976 -448 976
WIRE -368 976 -400 976
WIRE -144 976 -144 960
WIRE -400 992 -400 976
WIRE -16 992 -16 960
WIRE -1648 1024 -1648 992
WIRE -1552 1024 -1552 992
WIRE -1456 1024 -1456 992
WIRE -1360 1024 -1360 976
WIRE 272 1024 272 992
WIRE -976 1040 -1008 1040
WIRE -864 1040 -896 1040
WIRE -832 1040 -864 1040
WIRE -864 1056 -864 1040
WIRE -736 1072 -736 1040
WIRE -144 1088 -144 1056
WIRE 384 1088 384 880
WIRE -1648 1152 -1648 1104
WIRE -1552 1152 -1552 1104
WIRE -1456 1152 -1456 1104
WIRE -1360 1152 -1360 1104
WIRE -864 1168 -864 1136
WIRE 256 1200 208 1200
WIRE 384 1200 384 1168
WIRE 384 1200 256 1200
WIRE -48 1232 -256 1232
WIRE -16 1232 -48 1232
WIRE 112 1232 112 1184
WIRE 208 1232 208 1200
WIRE -400 1248 -400 1056
WIRE -320 1248 -400 1248
WIRE -176 1264 -256 1264
WIRE -16 1296 -16 1232
WIRE 256 1296 256 1280
WIRE 288 1296 256 1296
WIRE 256 1312 256 1296
WIRE -400 1328 -400 1248
WIRE -320 1328 -336 1328
WIRE -240 1328 -256 1328
WIRE -176 1328 -176 1264
WIRE -816 1392 -816 1360
WIRE -400 1392 -400 1328
WIRE -320 1392 -336 1392
WIRE -240 1392 -256 1392
WIRE -176 1392 -176 1328
WIRE 208 1392 208 1360
WIRE 256 1392 208 1392
WIRE 112 1408 112 1360
WIRE 16 1440 16 1328
WIRE -400 1472 -400 1392
WIRE -320 1472 -400 1472
WIRE -176 1472 -176 1392
WIRE -176 1472 -240 1472
WIRE -816 1488 -816 1472
WIRE -800 1488 -816 1488
WIRE -704 1488 -720 1488
WIRE -688 1488 -704 1488
WIRE -816 1504 -816 1488
WIRE -176 1504 -176 1472
WIRE -704 1568 -704 1488
WIRE -688 1568 -704 1568
WIRE 16 1568 16 1520
WIRE -608 1584 -608 1488
WIRE -608 1584 -624 1584
WIRE -560 1584 -608 1584
WIRE -688 1600 -736 1600
WIRE -176 1600 -176 1584
WIRE -736 1632 -736 1600
WIRE -736 1632 -768 1632
FLAG -832 704 0
FLAG -1552 1152 0
FLAG -1456 1152 0
FLAG -1552 992 V+
FLAG -1456 992 V-
FLAG -704 224 V+
FLAG -512 464 0
FLAG -608 112 V+
FLAG -448 112 V+
FLAG -960 608 0
FLAG -960 448 Vlin
FLAG -768 432 Vlin
FLAG -1360 1152 0
FLAG -1360 976 SIGIN
FLAG -736 880 V+
FLAG -736 1072 V-
FLAG -448 416 Vexp
FLAG -640 912 Vexp
FLAG -864 1008 0
FLAG -864 1168 0
FLAG -144 1088 0
FLAG -144 912 0
FLAG 272 1024 0
FLAG 80 832 Vexp
FLAG -16 800 V+
FLAG -16 992 V-
FLAG -1008 1040 SIGIN
IOPIN -1008 1040 In
FLAG 496 960 0
FLAG 576 880 SIGOUT
IOPIN 576 880 Out
FLAG -176 1600 0
FLAG 288 1296 0
FLAG 112 1184 V-
FLAG 112 1408 V+
FLAG -48 1312 0
FLAG -816 1584 0
FLAG -560 1584 QCV
IOPIN -560 1584 Out
FLAG -1648 1152 0
FLAG -1648 992 Qraw
FLAG -768 1632 Qraw
IOPIN -768 1632 In
FLAG -816 1360 V+
FLAG 16 1568 QCV
SYMBOL Opamps\\opamp -768 592 R0
SYMATTR InstName U1
SYMBOL npn -768 384 R0
SYMATTR InstName Q1
SYMBOL npn -544 384 M0
SYMATTR InstName Q2
SYMBOL res -672 512 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap -736 560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10p
SYMBOL res -720 240 R0
WINDOW 0 46 45 VRight 2
WINDOW 3 -18 27 VRight 2
SYMATTR InstName R2
SYMATTR Value 350k
SYMBOL pnp -512 352 M180
SYMATTR InstName Q3
SYMBOL pnp -544 352 R180
WINDOW 0 50 31 Left 2
WINDOW 3 38 55 Left 2
SYMATTR InstName Q4
SYMBOL res -624 128 R0
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL res -464 128 R0
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL voltage -1552 1008 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL voltage -1456 1008 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -15
SYMBOL voltage -960 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -354 95 Left 2
SYMATTR Value PULSE(-100m 100m 0 .5 .5 0 1)
SYMATTR InstName V3
SYMBOL voltage -1360 1008 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(-1 1 0 0 0 .00005 .0001)
SYMBOL OTAs\\LM13700 -768 896 R0
SYMATTR InstName U2
SYMBOL res -880 1024 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -848 1152 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 220
SYMBOL res -720 832 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -880 912 R0
SYMATTR InstName R8
SYMATTR Value 220
SYMBOL Opamps\\opamp -336 896 R0
SYMATTR InstName U3
SYMBOL cap -416 992 R0
SYMATTR InstName C3
SYMATTR Value 2200p
SYMBOL res -160 736 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -128 928 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 220
SYMBOL res -272 976 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL res -160 960 R0
SYMATTR InstName R13
SYMATTR Value 220
SYMBOL OTAs\\LM13700 -48 816 R0
SYMATTR InstName U4
SYMBOL Opamps\\opamp 336 816 R0
SYMATTR InstName U5
SYMBOL cap 256 928 R0
SYMATTR InstName C4
SYMATTR Value 2200p
SYMBOL cap 496 864 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 480 864 R0
SYMATTR InstName R15
SYMATTR Value 15k
SYMBOL res -192 1488 R0
SYMATTR InstName R17
SYMATTR Value 3.3k
SYMBOL Opamps\\opamp -288 1312 R180
SYMATTR InstName U6
SYMBOL diode -256 1312 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode -320 1408 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL res -224 1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL diode -336 1312 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -176 1312 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -400 1408 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL diode -240 1408 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL OTAs\\LM13700 144 1376 R180
SYMATTR InstName U7
SYMBOL res 240 1296 R0
SYMATTR InstName R9
SYMATTR Value 500
SYMBOL res 240 1184 R0
SYMATTR InstName R14
SYMATTR Value 500
SYMBOL res -64 1216 R0
SYMATTR InstName R16
SYMATTR Value 3.3k
SYMBOL res 0 1424 R0
SYMATTR InstName R19
SYMATTR Value 30k
SYMBOL res 368 1072 R0
SYMATTR InstName R20
SYMATTR Value 30k
SYMBOL Opamps\\opamp -656 1520 R0
SYMATTR InstName U8
SYMBOL res -592 1472 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 100k
SYMBOL res -704 1472 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 3.5k
SYMBOL res -800 1488 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R23
SYMATTR Value 11.15k
SYMBOL res -800 1600 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R24
SYMATTR Value 390
SYMBOL voltage -1648 1008 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 3.3 0 .5 .5 0 1)
TEXT -1576 800 Left 2 !.lib opamp.sub
TEXT -1576 776 Left 2 !.tran 0 2.5 0.5
TEXT -1576 824 Left 2 !.lib LM13700.sub
